# 新たに知ったpatchコマンドとsortコマンドのオプション

シェルスクリプトを書いていて、もっと良い書き方ないのかなと調べていたら新たに知ったコマンドのオプションについて。

## patch -d

`-d` パッチを当てる前にディレクトリを移動できる。他のコマンドの `-C` などに似ているかもしれない。

以下のように、パッチを当てたいディレクトリの上のディレクトリにいても `-d` を指定することによって移動せずに適用できる。

```console
$ ls -1 bash51-00?
bash51-001
bash51-002
bash51-003
bash51-004
$ ls -1 bash51-00? | xargs -n 1 -I % patch -d ./bash-5.1 -p 0 -i '../%'
```

## sort -z

`find` コマンドの `-print0` など、ヌル終端されている文字列でもソートできる。

```console
$ find . -name 'bash51-00?' -print0 | sort -nz | xargs -0 -n 1
./bash51-001
./bash51-002
./bash51-003
./bash51-004
```
